#!/usr/bin/env bash

# debugging:
# set -x
# stop on error:
# set -e

# shell specific options and information for prompt, shell settings

# change the .history file mode to append
shopt -s histappend

# run at each shell prompt; -a: write immediately the current/new lines to the history file

new_entry="history -a"
case ";$PROMPT_COMMAND;" in
    *";$new_entry;"*)
	# echo "PROMPT_COMMAND already contains: $new_entry"
	:;;
    *)
	PROMPT_COMMAND="$new_entry;$PROMPT_COMMAND"
	# echo "PROMPT_COMMAND does not contain: $new_entry"
	;;
esac


if     [ "$isLinuxNew64" -gt 0 ] || [ "$isLinuxFranzi" -gt 0 ] \
    # || [ "$isLinuxVB" -gt 0 ] \   # fancy prompts are too slow for this machine
then
    # readFile $bash_files/prompt
    readFile $bash_files/prompt-sexy

    # Set config variables first
    GIT_PROMPT_ONLY_IN_REPO=1

    # as last entry source the gitprompt script
    readFile $bash_files/bash-git-prompt/gitprompt.sh

else
    readFile $bash_files/prompt
    #readFile $bash_files/prompt-sexy
    : # use predefined bash prompt - see echo $PS1
fi
